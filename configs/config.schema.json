{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://steelclock.local/config.schema.json",
  "title": "SteelClock Configuration",
  "description": "Configuration schema for SteelClock - display manager for SteelSeries APEX 7",
  "type": "object",
  "required": ["display", "widgets"],
  "properties": {
    "refresh_rate_ms": {
      "type": "integer",
      "description": "Display refresh rate in milliseconds (minimum 100ms = 10Hz)",
      "minimum": 100,
      "default": 100
    },
    "unregister_on_exit": {
      "type": "boolean",
      "description": "Whether to unregister from GameSense API on exit. Set to false to avoid timeout issues. Default: false",
      "default": false
    },
    "deinitialize_timer_length_ms": {
      "type": "integer",
      "description": "Custom timeout for game deactivation after last event in milliseconds. Valid range: 1000-60000 (1-60 seconds). If not specified, GameSense uses 15000ms (15 seconds).",
      "minimum": 1000,
      "maximum": 60000
    },
    "event_batching_enabled": {
      "type": "boolean",
      "description": "Enable multiple event batching to reduce HTTP request overhead. Automatically falls back to single-frame mode if not supported by GameSense API. Default: false",
      "default": false
    },
    "event_batch_size": {
      "type": "integer",
      "description": "Maximum number of frames to batch in a single request when event_batching_enabled is true. Valid range: 1-100. Default: 10",
      "minimum": 1,
      "maximum": 100,
      "default": 10
    },
    "bundled_font_url": {
      "type": "string",
      "description": "URL to download the bundled font if no system font is available. Default: https://github.com/kika/fixedsys/releases/download/v3.02.9/FSEX302.ttf",
      "format": "uri",
      "default": "https://github.com/kika/fixedsys/releases/download/v3.02.9/FSEX302.ttf"
    },
    "bundled_wad_url": {
      "type": "string",
      "description": "URL to download the DOOM shareware WAD file if not found. Default: https://distro.ibiblio.org/slitaz/sources/packages/d/doom1.wad",
      "format": "uri",
      "default": "https://distro.ibiblio.org/slitaz/sources/packages/d/doom1.wad"
    },
    "display": {
      "type": "object",
      "description": "Physical display configuration",
      "required": ["width", "height"],
      "properties": {
        "width": {
          "type": "integer",
          "description": "Display width in pixels",
          "default": 128
        },
        "height": {
          "type": "integer",
          "description": "Display height in pixels",
          "default": 40
        },
        "background_color": {
          "type": "integer",
          "description": "Display background color (0=black, 255=white)",
          "minimum": 0,
          "maximum": 255,
          "default": 0
        }
      }
    },
    "layout": {
      "type": "object",
      "description": "Layout configuration (basic or viewport)",
      "properties": {
        "type": {
          "type": "string",
          "description": "Layout type",
          "enum": ["basic", "viewport"],
          "default": "basic"
        },
        "virtual_width": {
          "type": "integer",
          "description": "Virtual canvas width (for viewport mode)",
          "minimum": 128
        },
        "virtual_height": {
          "type": "integer",
          "description": "Virtual canvas height (for viewport mode)",
          "minimum": 40
        }
      }
    },
    "widgets": {
      "type": "array",
      "description": "Array of widget configurations",
      "items": {
        "oneOf": [
          {"$ref": "#/definitions/clockWidget"},
          {"$ref": "#/definitions/cpuWidget"},
          {"$ref": "#/definitions/memoryWidget"},
          {"$ref": "#/definitions/networkWidget"},
          {"$ref": "#/definitions/diskWidget"},
          {"$ref": "#/definitions/keyboardWidget"},
          {"$ref": "#/definitions/keyboardLayoutWidget"},
          {"$ref": "#/definitions/volumeWidget"},
          {"$ref": "#/definitions/volumeMeterWidget"},
          {"$ref": "#/definitions/doomWidget"}
        ]
      }
    }
  },
  "definitions": {
    "widgetBase": {
      "type": "object",
      "required": ["type", "id", "position"],
      "properties": {
        "type": {
          "type": "string",
          "description": "Widget type"
        },
        "id": {
          "type": "string",
          "description": "Unique widget identifier"
        },
        "enabled": {
          "type": "boolean",
          "description": "Enable or disable this widget",
          "default": true
        },
        "position": {
          "$ref": "#/definitions/position"
        },
        "style": {
          "$ref": "#/definitions/style"
        }
      }
    },
    "position": {
      "type": "object",
      "description": "Widget position and size",
      "required": ["x", "y", "w", "h"],
      "properties": {
        "x": {
          "type": "integer",
          "description": "X coordinate on canvas",
          "minimum": 0
        },
        "y": {
          "type": "integer",
          "description": "Y coordinate on canvas"
        },
        "w": {
          "type": "integer",
          "description": "Widget width in pixels"
        },
        "h": {
          "type": "integer",
          "description": "Widget height in pixels"
        },
        "z_order": {
          "type": "integer",
          "description": "Stacking order (higher = on top)"
        }
      }
    },
    "style": {
      "type": "object",
      "description": "Widget visual styling",
      "properties": {
        "background_color": {
          "type": "integer",
          "description": "Background color (-1=transparent, 0=black, 255=white). Use -1 for transparent background to overlay widgets.",
          "minimum": -1,
          "maximum": 255,
          "default": 0
        },
        "border": {
          "type": "boolean",
          "description": "Draw widget border",
          "default": false
        },
        "border_color": {
          "type": "integer",
          "description": "Border color (0-255)",
          "minimum": 0,
          "maximum": 255,
          "default": 255
        }
      }
    },
    "textProperties": {
      "type": "object",
      "description": "Text rendering properties",
      "properties": {
        "font": {
          "type": "string",
          "description": "Font name or path to TTF file (e.g., 'Arial', 'Consolas', 'Segoe UI Emoji')"
        },
        "font_size": {
          "type": "integer",
          "description": "Font size in pixels",
          "minimum": 1,
          "default": 10
        },
        "horizontal_align": {
          "type": "string",
          "description": "Horizontal text alignment",
          "enum": ["left", "center", "right"],
          "default": "center"
        },
        "vertical_align": {
          "type": "string",
          "description": "Vertical text alignment",
          "enum": ["top", "center", "bottom"],
          "default": "center"
        },
        "padding": {
          "type": "integer",
          "description": "Padding from edges in pixels",
          "minimum": 0,
          "default": 0
        }
      }
    },
    "autoHideProperties": {
      "type": "object",
      "description": "Auto-hide behavior properties (widget appears temporarily then hides)",
      "properties": {
        "auto_hide": {
          "type": "boolean",
          "description": "Enable auto-hide mode (widget starts hidden and appears on trigger)",
          "default": false
        },
        "auto_hide_timeout": {
          "type": "number",
          "description": "Seconds to wait before hiding widget after last trigger",
          "minimum": 0.1,
          "default": 2.0
        }
      }
    },
    "clockWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "clock"},
            "properties": {
              "type": "object",
              "properties": {
                "display_mode": {
                  "type": "string",
                  "description": "Display mode: text (digital) or clock_face (analog)",
                  "enum": ["text", "clock_face"],
                  "default": "text"
                },
                "format": {
                  "type": "string",
                  "description": "Time format for text mode (strftime syntax: %H:%M:%S, %I:%M %p, etc.)",
                  "default": "%H:%M:%S"
                },
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 1.0
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "cpuWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "cpu"},
            "properties": {
              "type": "object",
              "properties": {
                "display_mode": {
                  "type": "string",
                  "description": "Display mode",
                  "enum": ["text", "bar_horizontal", "bar_vertical", "graph", "gauge"],
                  "default": "bar_horizontal"
                },
                "per_core": {
                  "type": "boolean",
                  "description": "Show per-core usage (multiple bars/values)",
                  "default": false
                },
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 1.0
                },
                "history_length": {
                  "type": "integer",
                  "description": "Number of samples for graph mode",
                  "minimum": 2,
                  "default": 30
                },
                "core_border": {
                  "type": "boolean",
                  "description": "Draw border around each core cell (text grid/graph grid/gauge grid) or bar",
                  "default": false
                },
                "core_margin": {
                  "type": "integer",
                  "description": "Margin between core cells or bars when per_core is enabled",
                  "minimum": 0,
                  "default": 0
                },
                "fill_color": {
                  "type": "integer",
                  "description": "Bar/graph fill color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "gauge_color": {
                  "type": "integer",
                  "description": "Gauge arc and tick marks color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "gauge_needle_color": {
                  "type": "integer",
                  "description": "Gauge needle color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "memoryWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "memory"},
            "properties": {
              "type": "object",
              "properties": {
                "display_mode": {
                  "type": "string",
                  "description": "Display mode",
                  "enum": ["text", "bar_horizontal", "bar_vertical", "graph", "gauge"],
                  "default": "bar_horizontal"
                },
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 1.0
                },
                "history_length": {
                  "type": "integer",
                  "description": "Number of samples for graph mode",
                  "minimum": 2,
                  "default": 30
                },
                "bar_border": {
                  "type": "boolean",
                  "description": "Draw border around the bar",
                  "default": false
                },
                "fill_color": {
                  "type": "integer",
                  "description": "Bar/graph fill color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "gauge_color": {
                  "type": "integer",
                  "description": "Gauge arc and tick marks color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "gauge_needle_color": {
                  "type": "integer",
                  "description": "Gauge needle color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "networkWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "network"},
            "properties": {
              "type": "object",
              "properties": {
                "interface": {
                  "type": "string",
                  "description": "Network interface name (e.g., 'eth0', 'Ethernet', null=auto)",
                  "default": "eth0"
                },
                "display_mode": {
                  "type": "string",
                  "description": "Display mode",
                  "enum": ["text", "bar_horizontal", "bar_vertical", "graph", "gauge"],
                  "default": "bar_horizontal"
                },
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 1.0
                },
                "history_length": {
                  "type": "integer",
                  "description": "Number of samples for graph mode",
                  "minimum": 2,
                  "default": 30
                },
                "max_speed_mbps": {
                  "type": "number",
                  "description": "Max speed for scaling in Mbps (-1=auto)",
                  "default": 100.0
                },
                "speed_unit": {
                  "type": "string",
                  "description": "Speed display unit (for text mode)",
                  "enum": ["bps", "kbps", "mbps"],
                  "default": "kbps"
                },
                "bar_border": {
                  "type": "boolean",
                  "description": "Draw border around bars",
                  "default": false
                },
                "rx_color": {
                  "type": "integer",
                  "description": "RX (download) color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "tx_color": {
                  "type": "integer",
                  "description": "TX (upload) color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 128
                },
                "rx_needle_color": {
                  "type": "integer",
                  "description": "RX needle color for gauge mode (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "tx_needle_color": {
                  "type": "integer",
                  "description": "TX needle color for gauge mode (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "diskWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "disk"},
            "properties": {
              "type": "object",
              "properties": {
                "disk_name": {
                  "type": ["string", "null"],
                  "description": "Disk name (Windows: 'PhysicalDrive0', Linux: 'sda', null=auto)",
                  "default": null
                },
                "display_mode": {
                  "type": "string",
                  "description": "Display mode",
                  "enum": ["text", "bar_horizontal", "bar_vertical", "graph"],
                  "default": "bar_horizontal"
                },
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 1.0
                },
                "history_length": {
                  "type": "integer",
                  "description": "Number of samples for graph mode",
                  "minimum": 2,
                  "default": 30
                },
                "max_speed_mbps": {
                  "type": "number",
                  "description": "Max speed for scaling in MB/s (-1=auto)",
                  "default": -1
                },
                "bar_border": {
                  "type": "boolean",
                  "description": "Draw border around bars",
                  "default": false
                },
                "read_color": {
                  "type": "integer",
                  "description": "Read color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "write_color": {
                  "type": "integer",
                  "description": "Write color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "keyboardWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "keyboard"},
            "properties": {
              "type": "object",
              "properties": {
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 0.2
                },
                "spacing": {
                  "type": "integer",
                  "description": "Spacing between indicators in pixels",
                  "minimum": 0,
                  "default": 3
                },
                "caps_lock_on": {
                  "type": "string",
                  "description": "Symbol for Caps Lock ON state",
                  "default": "â¬†"
                },
                "caps_lock_off": {
                  "type": "string",
                  "description": "Symbol for Caps Lock OFF state (empty=hide)",
                  "default": ""
                },
                "num_lock_on": {
                  "type": "string",
                  "description": "Symbol for Num Lock ON state",
                  "default": "ðŸ”’"
                },
                "num_lock_off": {
                  "type": "string",
                  "description": "Symbol for Num Lock OFF state (empty=hide)",
                  "default": ""
                },
                "scroll_lock_on": {
                  "type": "string",
                  "description": "Symbol for Scroll Lock ON state",
                  "default": "â¬‡"
                },
                "scroll_lock_off": {
                  "type": "string",
                  "description": "Symbol for Scroll Lock OFF state (empty=hide)",
                  "default": ""
                },
                "indicator_color_on": {
                  "type": "integer",
                  "description": "Color for ON state (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "indicator_color_off": {
                  "type": "integer",
                  "description": "Color for OFF state (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 100
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "keyboardLayoutWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "keyboard_layout"},
            "properties": {
              "type": "object",
              "properties": {
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 0.2
                },
                "display_format": {
                  "type": "string",
                  "description": "Language code display format",
                  "enum": ["iso639-1", "iso639-2", "full"],
                  "default": "iso639-1"
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"}
              }
            }
          }
        }
      ]
    },
    "volumeWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "volume"},
            "properties": {
              "type": "object",
              "properties": {
                "display_mode": {
                  "type": "string",
                  "description": "Display mode: text, bar_horizontal, bar_vertical, gauge, triangle",
                  "enum": ["text", "bar_horizontal", "bar_vertical", "gauge", "triangle"],
                  "default": "bar_horizontal"
                },
                "update_interval": {
                  "type": "number",
                  "description": "Update interval in seconds",
                  "minimum": 0.1,
                  "default": 0.1
                },
                "fill_color": {
                  "type": "integer",
                  "description": "Fill color for bars and triangle (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "bar_border": {
                  "type": "boolean",
                  "description": "Draw border around bars",
                  "default": false
                },
                "gauge_color": {
                  "type": "integer",
                  "description": "Gauge arc and tick color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "gauge_needle_color": {
                  "type": "integer",
                  "description": "Gauge needle color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "triangle_fill_color": {
                  "type": "integer",
                  "description": "Triangle fill color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "triangle_border": {
                  "type": "boolean",
                  "description": "Draw border around triangle",
                  "default": false
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "volumeMeterWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "volume_meter"},
            "properties": {
              "type": "object",
              "properties": {
                "display_mode": {
                  "type": "string",
                  "description": "Display mode: text, bar_horizontal, bar_vertical, gauge",
                  "enum": ["text", "bar_horizontal", "bar_vertical", "gauge"],
                  "default": "bar_horizontal"
                },
                "update_interval": {
                  "type": "number",
                  "description": "Meter update interval in seconds (matches display refresh rate)",
                  "minimum": 0.03,
                  "default": 0.1
                },
                "fill_color": {
                  "type": "integer",
                  "description": "Main meter fill color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "clipping_color": {
                  "type": "integer",
                  "description": "Color when clipping is detected (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "left_channel_color": {
                  "type": "integer",
                  "description": "Left channel color for stereo modes (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "right_channel_color": {
                  "type": "integer",
                  "description": "Right channel color for stereo modes (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "stereo_mode": {
                  "type": "boolean",
                  "description": "Enable stereo mode to display left and right channels separately (works with all display modes)",
                  "default": false
                },
                "bar_border": {
                  "type": "boolean",
                  "description": "Draw border around bars",
                  "default": false
                },
                "gauge_color": {
                  "type": "integer",
                  "description": "Gauge arc and tick color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 200
                },
                "gauge_needle_color": {
                  "type": "integer",
                  "description": "Gauge needle color (0-255)",
                  "minimum": 0,
                  "maximum": 255,
                  "default": 255
                },
                "use_db_scale": {
                  "type": "boolean",
                  "description": "Use logarithmic dB scale instead of linear (-60dB to 0dB mapped to 0-100%)",
                  "default": false
                },
                "show_clipping": {
                  "type": "boolean",
                  "description": "Show clipping indicator when peak exceeds threshold",
                  "default": true
                },
                "clipping_threshold": {
                  "type": "number",
                  "description": "Peak level that triggers clipping indicator (0.0-1.0)",
                  "minimum": 0.0,
                  "maximum": 1.0,
                  "default": 0.99
                },
                "silence_threshold": {
                  "type": "number",
                  "description": "Peak level below which is considered silence (0.0-1.0)",
                  "minimum": 0.0,
                  "maximum": 1.0,
                  "default": 0.01
                },
                "decay_rate": {
                  "type": "number",
                  "description": "Peak decay rate in units per second (VU meter ballistics)",
                  "minimum": 0.1,
                  "default": 2.0
                },
                "show_peak_hold": {
                  "type": "boolean",
                  "description": "Show peak hold line (held maximum peak that decays slowly)",
                  "default": true
                },
                "peak_hold_time": {
                  "type": "number",
                  "description": "How long to hold peak indicator in seconds",
                  "minimum": 0.1,
                  "default": 1.0
                },
                "auto_hide_on_silence": {
                  "type": "boolean",
                  "description": "Auto-hide widget when no audio detected (triggers auto_hide)",
                  "default": false
                },
                "auto_hide_silence_time": {
                  "type": "number",
                  "description": "Time after last audio before hiding (seconds)",
                  "minimum": 0.5,
                  "default": 2.0
                },
                "font": {"$ref": "#/definitions/textProperties/properties/font"},
                "font_size": {"$ref": "#/definitions/textProperties/properties/font_size"},
                "horizontal_align": {"$ref": "#/definitions/textProperties/properties/horizontal_align"},
                "vertical_align": {"$ref": "#/definitions/textProperties/properties/vertical_align"},
                "padding": {"$ref": "#/definitions/textProperties/properties/padding"},
                "auto_hide": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide"},
                "auto_hide_timeout": {"$ref": "#/definitions/autoHideProperties/properties/auto_hide_timeout"}
              }
            }
          }
        }
      ]
    },
    "doomWidget": {
      "allOf": [
        {"$ref": "#/definitions/widgetBase"},
        {
          "properties": {
            "type": {"const": "doom"},
            "properties": {
              "type": "object",
              "properties": {
                "wad_name": {
                  "type": "string",
                  "description": "WAD filename in working directory (doom1.wad, doom.wad, doom2.wad, etc.). Auto-downloads shareware if not found.",
                  "default": "doom1.wad"
                }
              }
            }
          }
        }
      ]
    }
  }
}
